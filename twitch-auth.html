<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Twitch Auth</title>
</head>
<body>
<script>
  // Extract the token from URL fragment
  const hash = window.location.hash; // e.g., #access_token=xxx&scope=...
  if (hash) {
    const params = new URLSearchParams(hash.substring(1));
    const token = params.get("access_token");

    if (token) {
      // Send token to background.js
      chrome.runtime.sendMessage({ action: "TOKEN_RECEIVED", token });
    }
  }

  // Close the page automatically after sending token
  window.close();
</script>
</body>
</html>
