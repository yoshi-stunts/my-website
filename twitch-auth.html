<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Twitch Login</title>
</head>
<body>
  <h2>Logging you inâ€¦</h2>

  <script>
    (function () {
      if (!location.hash) return;

      const params = new URLSearchParams(location.hash.slice(1));
      const token = params.get("access_token");
      if (!token) return;

      // Send token to opener window
      window.opener?.postMessage({ type: "TWITCH_TOKEN", token }, "*");

      // Close popup after short delay
      setTimeout(() => window.close(), 300);
    })();
  </script>
</body>
</html>
