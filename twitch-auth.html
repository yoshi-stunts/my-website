<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Twitch Login</title>
</head>
<body>
  <p>Logging you inâ€¦</p>

  <script>
    const hash = location.hash;
    if (hash.includes("access_token")) {
      const params = new URLSearchParams(hash.substring(1));
      const token = params.get("access_token");

      if (token && window.opener) {
        window.opener.postMessage(
          { type: "TWITCH_TOKEN", token },
          "*"
        );
      }
    }

    setTimeout(() => window.close(), 300);
  </script>
</body>
</html>
